Below is a Bloomberg / Vega-grade explanation and remediation plan, structured exactly how professional trading terminals handle this.

1. Why the dashboard is being forced back to /account
The actual chain of events

From your logs and DB state:

All tokens are valid

/api/auth/status → AUTH_CONFIRMED

fullyReady: true

validTokens = 6 / 6

remainingSeconds = 0 (important)

Leader election behaves correctly

One tab becomes leader

Followers wait on BroadcastChannel

Auth WS connects once (good)

But the UI still redirects to /account

This happens because your routing guard is treating “token at boundary” as unauthenticated, not as degraded-but-valid.

Specifically:

validity_at = 2026-01-02 03:30:00

System time ≈ 02:25 IST

Remaining validity ≈ ~65 minutes

But your frontend logic is interpreting remainingSeconds === 0 as invalid

That is the root cause.

2. Bloomberg’s rule (this is critical)

A trading terminal NEVER revokes session UI access just because tokens are near expiry.

Bloomberg, Refinitiv, ICE, etc. follow this hierarchy:

State	Meaning	UI Action
AUTH_INVALID	No valid session	Hard redirect to login
AUTH_VALID_DEGRADED	Tokens expiring soon	Stay in app + warn
AUTH_VALID	Tokens healthy	Normal operation

You currently have only two states:

authenticated

unauthenticated

That is insufficient for trading systems.

3. Why React StrictMode is amplifying the issue

In dev mode:

StrictMode double-invokes effects

Your WS + auth checks are firing twice

One pass sees:

remainingSeconds === 0

Interprets as invalid

Triggers route guard redirect

Second pass sees healthy state, but redirect already happened

This is why the behavior looks “random” or “forced”.

4. Market WS lifecycle bug (as you suspected)

You already identified this correctly.

The bug

Market WS is not singleton

It is bound to component lifecycle

When route guard fires → component unmounts → WS closes

Leader election flips

Followers re-evaluate

UI oscillates

This is exactly the class of bug Bloomberg terminals spend years eliminating.

5. Bloomberg-grade architecture (how they handle this)
A. Auth WS vs Market WS separation

Bloomberg treats these as different fault domains.

Channel	Purpose	Can cause logout?
Auth WS	Session + entitlement	YES
Market WS	Data feeds	NO
Option Chain WS	Data feeds	NO

Your system currently allows Market WS failure to influence routing. That must stop.

B. Token validity handling (your missing layer)

You must introduce a Token Health Model, not a boolean.

enum TokenHealth {
  HEALTHY,
  EXPIRING_SOON,
  EXPIRED
}


Frontend mapping:

function classifyToken(remainingSeconds: number): TokenHealth {
  if (remainingSeconds <= 0) return TokenHealth.EXPIRED;
  if (remainingSeconds < 300) return TokenHealth.EXPIRING_SOON; // 5 min
  return TokenHealth.HEALTHY;
}


Only EXPIRED may trigger redirect.

C. Bloomberg-style routing guard (this is key)
if (auth.state === 'AUTH_INVALID') {
  redirect('/account');
}

if (auth.state === 'AUTH_CONFIRMED') {
  // NEVER redirect from inside the app
  // even if tokens are expiring
}


Token expiry is visual + operational, not navigational.

6. What Bloomberg would show instead (UI behavior)

Based on your screenshot, this is what should happen:

Status bar (top right)

Green → Healthy

Amber → Token expiring in < 5 min

Red → Feed degraded (not logout)

Account page behavior

Never auto-navigate

Only manual navigation

Token timeline

Countdown continues

Auto-refresh begins when threshold reached

No polling storms

No route changes

7. Market WS: correct singleton + leader-only model

You already outlined the fix correctly. Here is the Bloomberg-grade version:

Rules

Exactly one Market WS per browser

Leader tab only

Never tied to React component lifecycle

Followers only consume BroadcastChannel

Implementation principles

WS lives in a module-level singleton

Guarded by useRef + static holder

StrictMode-safe (idempotent init)

Route changes do NOT affect WS

Bloomberg terminals treat market data feeds as process-level resources, not UI resources.

8. Why the redirect felt “forced”

Because the redirect is happening from inside a side effect, not from an explicit user action:

useEffect → auth check → route push

Triggered twice by StrictMode

Triggered again by WS reconnect churn

This is exactly what Bloomberg avoids by:

Centralizing session authority

Making routing a terminal decision, not a component decision

9. Concrete fixes you should apply (priority order)
1. Stop routing based on token countdown

Routing only on AUTH_INVALID

Never on remainingSeconds === 0

2. Introduce EXPIRING_SOON state

UI warning only

No redirects

3. Make Market WS a singleton

Outside React

Leader-only

BroadcastChannel fan-out

4. StrictMode hardening

Idempotent WS init

Ref-based guards

No side-effect routing

10. Final verdict

Your system is architecturally very close to Bloomberg-grade.

What you hit is a classic professional terminal pitfall:

Treating token expiry as an authentication failure instead of a session health degradation.

Bloomberg solved this decades ago by:

Separating auth from feeds

Decoupling routing from operational state

Never letting UI lifecycle control market infrastructure

You are now aligned with that model.