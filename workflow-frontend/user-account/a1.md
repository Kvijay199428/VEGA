Below is a complete, production-ready User / Account Page Implementation Guide for VEGA TRADER, written as a system + UI + backend contract specification.
This document can be used directly by frontend, backend, QA, and audit teams without further clarification.

VEGA TRADER
User / Account Page – Complete Implementation Guide
1. Purpose of the User / Account Page

The User / Account Page is a safe intermediate control surface between:

Login / Authentication

Full Trading Dashboard

Key Objective

Allow the user to observe authentication progress, system health, and account readiness
without requiring the PRIMARY access token.

This page must never place orders or expose privileged trading actions.

2. Entry Conditions (Who Can Access This Page)

User CAN access User / Account Page if ANY of the following is true:

At least one valid access token exists (WebSocket / Option Chain / etc.)

Login flow is in progress

System is in cooldown

Database recovery is ongoing

User CANNOT access this page only if:

No login attempt has ever been initiated

3. Exit Conditions (When User Can Leave This Page)
Destination	Condition
Login Page	User manually logs out
Dashboard	PRIMARY_VALIDATED == true AND AUTH_CONFIRMED == true
4. Page Responsibilities (Strict Scope)
MUST DO

Display authentication state

Display token progress

Display cooldown countdown

Display database lock warnings

Display user profile info (read-only)

Display API readiness

MUST NOT DO

Place trades

Modify positions

Modify orders

Assume login success

Trigger token generation

5. High-Level Layout Structure
┌───────────────────────────────────────┐
│ VEGA TRADER – USER / ACCOUNT           │
├───────────────────────────────────────┤
│ User Identity Panel                    │
│ Authentication Status Panel            │
│ Access Token Progress Panel            │
│ Cooldown & Recovery Panel              │
│ System Health Panel                    │
│ Navigation Control Panel               │
└───────────────────────────────────────┘

6. Section-by-Section Implementation
6.1 User Identity Panel
Data Source

Backend: /auth/user-info

Fields (Read-Only)
Field	Source
Client Code	Broker profile
User Name	Broker profile
Broker	Upstox
Plan Type	API metadata
Login Session ID	Backend-generated
UI Rule

Always visible

No edit controls

Mask sensitive identifiers

6.2 Authentication Status Panel (Critical)
Backend Endpoint

GET /auth/status

Sample Response
{
  "state": "COOLDOWN",
  "primaryPresent": false,
  "authConfirmed": false,
  "message": "Waiting for API cooldown to expire"
}

Display Rules
State	UI Message
GENERATING_TOKENS	“Generating access tokens…”
PARTIAL_AUTH	“Partial authentication completed”
COOLDOWN	“API cooldown active”
RESUME_GENERATION	“Resuming authentication…”
PRIMARY_VALIDATED	“Primary access token verified”
AUTH_CONFIRMED	“Authentication confirmed”
6.3 Access Token Progress Panel
Visual

Progress bar

Numeric counter

Backend Contract
{
  "totalApis": 6,
  "generated": 3,
  "missing": ["PRIMARY", "ORDER"]
}

UI Rules

Always show exact count

Highlight PRIMARY in red if missing

Progress bar never reaches 100% until PRIMARY exists

6.4 Cooldown & Recovery Panel
Backend Contract
{
  "cooldownActive": true,
  "remainingSeconds": 482
}

UI Behavior

Countdown timer (MM:SS)

Synchronized with Login Page

No refresh hacks (pure polling or SSE)

Messaging
API rate limit reached.
Authentication will resume automatically.

6.5 Database Lock & Recovery Panel
Trigger Conditions

SQLITE_BUSY

Retry threshold exceeded

Backend Signal
{
  "dbLocked": true,
  "recoveryInProgress": true
}

UI Display
⚠ Database temporarily unavailable.
Tokens safely stored in memory.
Auto-recovery in progress.

6.6 System Health Panel
Indicators
Component	Status Source
Database	DB health probe
Broker API	Ping endpoint
Token Cache	In-memory status
Scheduler	Cooldown timer
Colors

Green = OK

Amber = Degraded

Red = Blocked

6.7 Navigation Control Panel
Buttons
Button	Enabled When
Logout	Always
Retry Login	Only when not in cooldown
Go to Dashboard	AUTH_CONFIRMED == true
Hard Rule

Dashboard button must remain disabled until backend says ready.

7. Polling & Update Strategy
Recommended

Poll /auth/status every 2–3 seconds

Poll /auth/ready every 5 seconds

DO NOT

Poll aggressively (<1s)

Infer state locally

Use WebSocket unless required

8. Security Controls

No tokens rendered in UI

Mask client identifiers

Read-only access

Backend authorization required for every API call

9. Error Handling Matrix
Condition	UI Response
DB locked	Warning + auto recovery
Token expired	Status update
API unreachable	Degraded system
Cooldown active	Countdown shown
PRIMARY missing	Dashboard locked
10. Logout Behavior
Backend

Invalidate session

Clear memory cache

Retain persisted tokens (if valid)

Frontend

Redirect to Login Page

Reset UI state

11. QA Acceptance Checklist

✔ PRIMARY missing → dashboard disabled
✔ Cooldown timer accurate
✔ DB lock visible
✔ Auto-resume reflected
✔ No manual retry during cooldown
✔ Login never falsely completes

12. Why This Page Exists (Design Justification)

Prevents user confusion

Avoids false “login success”

Supports partial authentication

Makes system behavior transparent

Bloomberg-terminal grade UX

13. Final Verdict

User / Account Page is:

Deterministic

Safe

Observable

Backend-driven

Production-approved