Let’s move on to the second module – Modify Order V3. We’ll maintain the same enterprise-grade, industry-level documentation, including user/admin settings, CLI, Vite+React integration, and best practices.

2. Modify Order V3 – Enterprise Implementation Guide
Overview

The Modify Order V3 API allows you to update an existing order’s parameters such as quantity, price, product type, or order type without canceling and placing a new order. This is crucial for real-time strategy adjustments, risk management, and dynamic intraday trading.

Key Features:

Update a single order with full flexibility.

Supports partial modification.

Immediate confirmation for critical parameters like price, quantity.

Works seamlessly with Place Multi Order V2 mapping (order_id or correlation_id).

User/Admin-Centric Settings
User Settings

Access Token: Required for authorization; ensure token refresh.

Order Identification: Provide order_id or correlation_id to uniquely identify the order.

Updatable Parameters:

price

quantity

product (CASH / MIS / NRML)

order_type (LIMIT / MARKET / SL / SLM)

validity (DAY / IOC)

disclosed_quantity

Slice Handling: If the original order was sliced, updates can also be sliced or consolidated based on exchange rules.

User Strategy Tags: Retain original tag to track strategy-specific modifications.

Admin Settings

Rate-Limiting Controls: Ensure V3 modifications do not exceed allowed frequency per account.

Audit Logging: Maintain before/after snapshots of order payload.

Partial Success Handling: Track whether modifications were fully applied or partially rejected.

Monitoring: Alert for multiple retries on same order_id to prevent conflicts.

API Request Structure

Endpoint:

PUT /v3/order/modify
Sandbox: https://api-sandbox.upstox.com/v3/order/modify
Live: https://api.upstox.com/v3/order/modify
Authorization: Bearer <access_token>
Content-Type: application/json


Payload Example:

{
  "order_id": "1644490272000",
  "price": 22850,
  "quantity": 2000,
  "order_type": "LIMIT",
  "product": "MIS",
  "validity": "DAY",
  "disclosed_quantity": 0,
  "tag": "STRAT_A"
}


Notes:

If using correlation_id: Include "correlation_id": "order001" instead of order_id.

For partial modification, send only the fields you want to update.

Response Structure

Success Example (HTTP 200):

{
  "status": "success",
  "data": {
    "order_id": "1644490272000",
    "correlation_id": "order001",
    "updated_fields": ["price","quantity"]
  }
}


Error Example (HTTP 400):

{
  "status": "error",
  "error_code": "MODIFY_NOT_ALLOWED",
  "message": "Order cannot be modified post-market or due to exchange restriction"
}

Enterprise Best Practices

Order Mapping

Maintain a mapping of order_id ↔ correlation_id for all V2 orders.

Use this map for automated V3 modifications.

Partial Modifications

Only modify necessary fields to reduce API payload.

Always log before/after values for audit and rollback.

Retry Logic

Retry failed modifications with exponential backoff.

Avoid retrying immutable orders or orders in terminal states (TRADED, CANCELLED, EXPIRED).

CLI Usage

curl -X PUT "https://api.upstox.com/v3/order/modify" \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
      "order_id": "1644490272000",
      "price": 22850,
      "quantity": 2000,
      "order_type": "LIMIT"
    }'


Vite+React Integration

Use Axios.put() or fetch() with Authorization header.

Use React context for token management.

Maintain orderState object to track modifications in real time.

Admin Dashboard

Provide a modification history table per order_id.

Enable filtering by strategy tag or correlation_id.

Implement alerts for failed modifications or repeated retries.

Security

Always validate user inputs on frontend.

Use HTTPS; avoid storing tokens in local storage without encryption.

Enforce role-based access: only authorized users can modify certain order types or product categories.

Recommended Enterprise Workflow

Fetch open orders → Map order_id and correlation_id.

Decide modification (strategy or risk-driven).

Call Modify Order V3 → Log request/response.

Monitor updated_fields → Push update to frontend dashboard.

If error → Retry selectively or alert admin.