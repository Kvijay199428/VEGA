Let’s start building an enterprise-grade, industry-grade implementation guide for the Upstox order APIs you mentioned. I’ll provide modular documentation one API at a time, including best practices, user/admin settings, and multi-platform usage (CLI, Vite+React frontend, and curl/REST). We’ll start with Place Multi Order V2, and we can proceed sequentially to others.

1. Place Multi Order V2 – Enterprise Implementation Guide
Overview

The Place Multi Order V2 API allows simultaneous placement of up to 25 orders per request. This API is ideal for high-frequency trading (HFT), basket trades, or algorithmic strategies where multiple instruments must be ordered concurrently.
Key features include:

Automatic slicing for large quantities.

Correlation IDs for tracking each order.

BUY orders processed before SELL orders.

Sandbox/live endpoints.

Rate-limited independently from single order APIs.

User/Admin-Centric Settings
User Settings

Access Token: Required for authorization; token refresh mechanisms must be in place.

Order Correlation ID: Each order must have a unique correlation_id per batch.

Product Type: CASH (D), MIS (I), NRML (N) depending on intraday or delivery.

Order Type: MARKET, LIMIT, SL, SLM.

Quantity & Slicing: If quantity exceeds exchange freeze limit, enable slice: true.

Validity: DAY / IOC.

Tags: Optional, max 40 characters, useful for strategy segregation.

Admin Settings

Rate Limits: Configure API server to respect Upstox’s multi-order rate limit.

Sandbox/Live Switching: Admin should configure environment variables or config files for endpoint selection.

Logging & Audit: Store raw request/response for auditing, especially correlation IDs.

Alerting: Alerts for partial success or payload errors.

Retry Mechanism: Retry failed orders selectively based on summary.error and data.correlation_id.

API Request Structure

Endpoint:

POST /v2/order/multi/place
Sandbox: https://api-sandbox.upstox.com/v2/order/multi/place
Live: https://api.upstox.com/v2/order/multi/place
Authorization: Bearer <access_token>
Content-Type: application/json


Payload Example:

[
  {
    "correlation_id": "order001",
    "quantity": 2500,
    "product": "D",
    "validity": "DAY",
    "price": 0,
    "tag": "STRAT_A",
    "instrument_token": "NSE_FO|62864",
    "order_type": "MARKET",
    "transaction_type": "BUY",
    "disclosed_quantity": 0,
    "trigger_price": 0,
    "is_amo": false,
    "slice": true
  },
  {
    "correlation_id": "order002",
    "quantity": 2500,
    "product": "D",
    "validity": "DAY",
    "price": 0,
    "tag": "STRAT_B",
    "instrument_token": "NSE_FO|62867",
    "order_type": "MARKET",
    "transaction_type": "SELL",
    "disclosed_quantity": 0,
    "trigger_price": 0,
    "is_amo": false,
    "slice": true
  }
]

Response Structure

Success Example (HTTP 200):

{
  "status": "success",
  "data": [
    {"correlation_id": "order001", "order_id": "1644490272000"},
    {"correlation_id": "order002", "order_id": "1644490272001"}
  ],
  "summary": {"total": 2, "payload_error": 0, "success": 2, "error": 0}
}


Partial Success Example (HTTP 207):

{
  "status": "partial_success",
  "data": [
    {"correlation_id": "order001", "order_id": "1644490272000"}
  ],
  "errors": [
    {"error_code": "INVALID_QUANTITY", "message": "Quantity exceeds exchange freeze limit", "correlation_id": "order002"}
  ],
  "summary": {"total": 2, "success": 1, "error": 1}
}

Enterprise Best Practices

Correlation ID Tracking

Maintain a mapping table of correlation_id → order_id for modifications or cancellations.

Include strategy, batch ID, and timestamp for audit trails.

Slicing Strategy

Always enable slice: true for quantities near exchange freeze limits.

Log slice details for reconciliation: correlation_id_1, correlation_id_2, etc.

Retry Logic

Retry only failed orders (summary.error > 0).

Implement exponential backoff to avoid rate-limit violation.

Monitoring

Track summary.success, summary.error, summary.payload_error.

Alerts for repeated partial failures to investigate payload issues.

CLI Usage

curl -X POST "https://api.upstox.com/v2/order/multi/place" \
-H "Authorization: Bearer $ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d @multi_order_payload.json


Vite+React Integration

Use fetch or Axios with proper CORS proxy if needed.

Maintain a React context for accessToken.

Store correlation_id → order_id mapping in local or session storage for frontend tracking.

Enterprise Logging

Log raw request/response in JSON.

Capture latency for SLA compliance.

Store in central logging system (e.g., ELK stack).

Admin CLI Tools

multi-order-status <batch_id> → fetch success/error summary.

multi-order-retry <batch_id> → retry failed orders.

Security Considerations

Never store plain tokens in frontend.

Use environment variables or secure vaults for token storage.

Validate payload on client-side to avoid server errors.

Enforce HTTPS for all communications.