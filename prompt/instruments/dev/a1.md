Below is a clean, structured explanation of the Upstox Instruments ecosystem, written from an engineering / trading-system design perspective. I am not repeating the raw documentation; instead, I am normalizing it into what it is, why it exists, and how you should use it correctly in production systems.

1. What the Instruments Data Actually Represents

The Upstox Instruments dataset is a daily BOD (Beginning-of-Day) master contract reference.

Think of it as:

A static truth source that maps tradable entities → unique identifiers → exchange metadata

It is not market data, not real-time, and not order state.

2. Why This Dataset Is Critical

Every Upstox API call that touches:

Market quotes

Orders

Positions

WebSockets

Historical data

requires instrument_key.

Without this dataset:

You cannot safely place orders

You cannot subscribe to live feeds

You cannot map symbols reliably

This is the root of the entire trading stack.

3. Instrument Key vs Exchange Token (Very Important)
Instrument Key (Use This)

Globally unique across Upstox

Stable for the lifetime of the instrument

Used across all APIs

Format:

<SEGMENT>|<IDENTIFIER>


Example:

NSE_EQ|INE002A01018

Exchange Token (Do NOT rely on this)

Assigned by exchange

Can be reused after expiry

Unsafe for long-term persistence

Production Rule

Persist and index everything by instrument_key, never by exchange_token.

4. Files and Their Purpose (Architectural View)
File	Purpose
complete.json.gz	Entire tradable universe (EQ + F&O + Index)
NSE.json.gz, BSE.json.gz, MCX.json.gz	Exchange-specific subsets
suspended-instrument.json.gz	Instruments blocked from trading
MTF.json.gz	Instruments allowed for Margin Trading Facility
*_MIS.json.gz	Instruments allowed for intraday (MIS)
Design Insight

These files are orthogonal overlays, not replacements.

Example:

An equity can exist in:

BOD

MTF

MIS
simultaneously.

5. Instrument Categories (Normalized)
5.1 Equity (EQ)

Represents cash market stocks.

Key properties:

ISIN-based identity

Lot size = 1

Tick size defined

Used for delivery, MIS, or MTF

Use case:

Equity trading

Portfolio holdings

Cash market quotes

5.2 Futures (FUT)

Represents derivative contracts with expiry.

Key properties:

Expiry timestamp

Underlying mapping (underlying_key)

Lot-based trading

No strike price

Use case:

Hedging

Leverage

Roll-over strategies

5.3 Options (CE / PE)

Represents derivative contracts with strike + expiry.

Key properties:

Strike price

Call / Put

Underlying mapping

Large lot sizes

Use case:

Option strategies

Greeks computation

Volatility trading

5.4 Index

Represents non-tradable reference instruments.

Key properties:

No lot size

No expiry

Used only for data

Use case:

Market direction

Index-based derivatives

Indicators

6. Suspended Instruments

These instruments:

Exist historically

Have valid identifiers

Cannot be traded

Why they exist:

Surveillance actions

Regulatory suspension

Corporate actions

Engineering implication:

Your order engine must block these

Your UI must gray them out

7. MTF Instruments (Margin Trading Facility)

Adds leverage metadata on top of EQ.

Important fields:

mtf_enabled

mtf_bracket (margin multiplier)

Trading implication:

Same equity

Different margin logic

Requires risk checks

8. MIS Instruments (Intraday)

Adds intraday leverage rules.

Important fields:

intraday_margin

intraday_leverage

Trading implication:

Auto square-off

Tighter risk limits

Time-bounded validity

9. How You Should Use This in a Real System
Daily Startup Flow (Best Practice)

Download complete.json.gz

Decompress and load into memory / DB

Index by:

instrument_key

segment

instrument_type

Overlay:

Suspended → mark disabled

MTF → attach leverage

MIS → attach intraday rules

Runtime Usage

Search → filter by segment + instrument_type

Orders → always use instrument_key

WebSocket → subscribe using instrument_key

Persistence → store instrument_key only

10. Why JSON Is Preferred Over CSV

From an engineering standpoint:

CSV	JSON
Flat	Structured
Weak typing	Strong schema
Hard to extend	Forward compatible
Column-order sensitive	Key-based

Upstox has clearly designed this for:

Schema evolution

Backward compatibility

Programmatic safety

11. Refresh & Lifecycle Semantics

Refreshed ~ 6 AM IST

Updated intra-day only if required

Next-day BOD:

Removes expired contracts

Removes delisted stocks

Rule

Treat instruments as immutable within a trading day.

12. Final Mental Model

Think of Instruments data as:

The static contract registry that everything else depends on

Market data moves.
Orders change.
Positions evolve.

Instrument metadata does not — within the day.