“limits” define how your MarketDataStreamerV3 can safely subscribe to data streams without exceeding system or API constraints.

Table:
Type	Category	Individual Limit	Combined Limit
Connection	–	5 connections/user	N/A
Subscription	Full D30	50 keys	1500 keys
1️⃣ Connection

Type: Connection

Category: – (not relevant here)

Individual Limit: 5 connections per user

Combined Limit: N/A

Explanation:

Each user is allowed up to 5 simultaneous WebSocket connections under Upstox Plus.

This is per user, meaning if a single user opens multiple clients (CLI, frontend, or different streams), the total must not exceed 5.

There is no “combined” limit because this only tracks connections, not subscriptions.

Implications for implementation:

You should track active connections per user.

Reject or queue additional connection attempts if exceeding the limit.

if (activeConnectionsForUser >= 5) {
    throw new IllegalStateException("Maximum connections exceeded for this user");
}

2️⃣ Subscription (Full D30)

Type: Subscription

Category: Full D30

Individual Limit: 50 keys

Combined Limit: 1500 keys

Explanation:

Individual Limit (50 keys):

If a user subscribes only to Full D30, they may subscribe to a maximum of 50 instrument keys at once.

Instrument keys = the unique identifiers for market instruments, e.g., "NSE_INDEX|Nifty Bank".

Combined Limit (1500 keys):

If a user subscribes to multiple categories simultaneously (e.g., Full D30 + LTPC + Option Greeks), then the number of keys allowed in Full D30 is limited to 1500, because multiple categories share system capacity.

Combined limit ensures that users don’t overload the server by subscribing to too many instruments across categories.

Example Scenarios:

Single category: Full D30 only

User subscribes 50 instruments → ✅ Allowed (individual ≤ 50)

Multiple categories: Full D30 + LTPC

User wants 2000 instruments in Full D30 → ❌ Exceeds combined limit (max allowed: 1500)

Multiple categories: Full D30 + Option Greeks + LTPC

Full D30 subscription automatically capped at 1500 instruments to respect combined system limits.

Key Takeaways

Individual Limit = Maximum per category if no other subscriptions are active.

Combined Limit = Maximum per category if subscribing across multiple categories simultaneously.

Connection Limit = Max number of simultaneous WS connections per user.

These limits must be enforced client-side (MarketDataStreamerV3) to prevent server rejection or throttling.